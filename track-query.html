@@ .. @@
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
@@ .. @@
  </div>
  <script>
    const { createClient } = supabase;
    const supabaseClient = createClient(
      'https://xzjunkpxvfdpuogoflzh.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6anVua3B4dmZkcHVvZ29mbHpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNjMwNzksImV4cCI6MjA2NDczOTA3OX0.bRMANK5hzAKnuFXylVfhtzuU18CsjeJ4wa1UWHvSPNQ'
    );
@@ .. @@
    if(f.ref.value.trim()){
      let { data } = await supabaseClient.from("QUERIES").select("*").eq("reference_number", f.ref.value.trim());
      if(data && data[0]){
@@ .. @@
    if(f.id_number.value.trim() && f.email.value.trim()){
      let { data } = await supabaseClient.from("QUERIES").select("*").eq("id_number", f.id_number.value.trim()).eq("email", f.email.value.trim());
      if(data && data[0]){
        tempQuery = data[0];
        tempOTP = Math.floor(100000 + Math.random()*900000)+"";

        // Simulate sending OTP (you can replace this with actual email service)
        console.log(`OTP sent to ${data[0].email}: ${tempOTP}`);
        
        // For demo purposes, show the OTP in the message (remove this in production)
        msg.innerHTML = `A 6-digit code has been sent to your email.<br><small style="color:#666;">Demo OTP: ${tempOTP}</small>`;

        document.getElementById('otpSection').style.display = "block";
      } else {