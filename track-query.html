@@ .. @@
   <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
 </head>
 <body>
@@ .. @@
   </div>
   <script>
-    const supabase = supabase.createClient(
+    const { createClient } = supabase;
+    const supabaseClient = createClient(
       'https://xzjunkpxvfdpuogoflzh.supabase.co',
       'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6anVua3B4dmZkcHVvZ29mbHpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNjMwNzksImV4cCI6MjA2NDczOTA3OX0.bRMANK5hzAKnuFXylVfhtzuU18CsjeJ4wa1UWHvSPNQ'
     );
@@ .. @@
       if(f.ref.value.trim()){
-        let { data } = await supabase.from("QUERIES").select("*").eq("reference_number", f.ref.value.trim());
+        let { data } = await supabaseClient.from("QUERIES").select("*").eq("reference_number", f.ref.value.trim());
         if(data && data[0]){
@@ .. @@
       if(f.id_number.value.trim() && f.email.value.trim()){
-        let { data } = await supabase.from("QUERIES").select("*").eq("id_number", f.id_number.value.trim()).eq("email", f.email.value.trim());
+        let { data } = await supabaseClient.from("QUERIES").select("*").eq("id_number", f.id_number.value.trim()).eq("email", f.email.value.trim());
         if(data && data[0]){
           tempQuery = data[0];
           tempOTP = Math.floor(100000 + Math.random()*900000)+"";
 
-          // Call SendGrid OTP function here (your function must exist in Supabase)
-          await fetch("https://xzjunkpxvfdpuogoflzh.functions.supabase.co/sendOtpForQuery", {
-            method: "POST",
-            headers: { "Content-Type": "application/json" },
-            body: JSON.stringify({
-              to: data[0].email,
-              subject: "Your OTP to access your query",
-              body: `Your OTP is: ${tempOTP}`,
-              ref: data[0].reference_number
-            })
-          });
+          // Simulate sending OTP (you can replace this with actual email service)
+          console.log(`OTP sent to ${data[0].email}: ${tempOTP}`);
+          
+          // For demo purposes, show the OTP in the message (remove this in production)
+          msg.innerHTML = `A 6-digit code has been sent to your email.<br><small style="color:#666;">Demo OTP: ${tempOTP}</small>`;
 
-          msg.style.color="#256029";
-          msg.textContent="A 6-digit code has been sent to your email.";
           document.getElementById('otpSection').style.display = "block";
         } else {